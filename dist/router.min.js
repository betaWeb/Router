(()=>{var n=class{constructor(t,r,e=null){this.path=null;this.params=[];this.callback=null;this.name=null;this.regex_path=null;this.path=t,this.params=t.match(/(:\w+)/gi)||[],this.callback=r,this.name=e,this.regex_path=new RegExp("^"+t.replace(/:[^\s/]+/g,"([\\w-]+)")+"$")}match(t){let r=t.match(this.regex_path);return r===null?null:(r.shift(),{path:this.path,callback:this.callback,name:this.name,params:r.reduce((e,s,i)=>{if(this.params[i]){let o=this.params[i].replace(":","");e[o]=s}return e},{})})}},h=n,a=class{constructor(t={}){this.mode="history";this.root="/";this.routes=[];this.current=null;this.interval=null;this.previous=[];if(this.mode=window.history.pushState?"history":"hash",t.mode&&(this.mode=t.mode),t.root&&(this.root=t.root),t.routes)for(let r of t.routes)this.add(r.path,r.callback,r.name);this.watchUrl=this.watchUrl.bind(this),this.listen()}add(t,r,e){return this.routes.push(new h(t,r,e)),this}remove(t){return this.routes=this.routes.filter(r=>r.path!==t),this}back(){this.mode==="history"&&window.history.back()}forward(){this.mode==="history"&&window.history.forward()}flush(){return this.routes=[],this}navigate(t={}){let r;if(t.name){let e=t.params||{},s=this.routes.find(i=>i.name===t.name);if(s){r=s.path;for(let i in e)e.hasOwnProperty(i)&&(r=r.replace(":"+i,e[i]))}}else r=t.path;if(!r)return;if(this.mode==="history")window.history.pushState(null,null,this.root+this.clearSlashes(r));else{let e=`${window.location.href.replace(/#(.*)$/,"")}#${r}`;this.previous.unshift(e),window.location.href=e}return this}clearSlashes(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")}getFragment(){let t;if(this.mode==="history")t=this.clearSlashes(decodeURI(window.location.pathname+window.location.search)),t=t.replace(/\?(.*)$/,""),t=this.root!=="/"?t.replace(this.root,""):t;else{let r=window.location.href.match(/#(.*)$/);t=r?r[1]:""}return this.clearSlashes(t)}listen(){clearInterval(this.interval),this.interval=setInterval(this.watchUrl,50)}watchUrl(){if(this.current===this.getFragment())return;this.current=this.getFragment();for(let t of this.routes){let r=t.match(this.current);if(r!==null){let e=[...Object.values(r.params),this.current,t];r.callback.apply(this,e);break}}}},m=a;window&&document&&(window.Router=a);})();
//# sourceMappingURL=router.min.js.map
