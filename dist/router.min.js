(()=>{var l=class{constructor(t,e,i=null){this.path=null;this.params=[];this.callback=null;this.name=null;this.regex_path=null;this.path=t,this.params=t.match(/(:\w+)/gi)||[],this.callback=e,this.name=i,this.regex_path=new RegExp("^"+t.replace(/:[^\s/]+/g,"([\\w-]+)")+"$")}match(t){let e=t.match(this.regex_path);return e===null?null:(e.shift(),{path:this.path,callback:this.callback,name:this.name,params:e.reduce((i,a,s)=>{if(this.params[s]){let h=this.params[s].replace(":","");i[h]=a}return i},{})})}},n=l,r=class{constructor(t={}){this.mode="history";this.root="/";this.routes=[];this.current=null;this.interval=null;this.previous=[];this.prefixes=[];this.mode=window.history.pushState?"history":"hash",t.mode&&(this.mode=t.mode),t.root&&(this.root=t.root),t.routes&&this.defineRoutes(t.routes),this.watchUrl=this.watchUrl.bind(this),this.listen()}add(t,e,i){return this.prefixes.length>0&&(t=this.prefixes.join("/")+"/"+t),this.routes.push(new n(r.clearSlashes(t),e,i)),this}remove(t){return this.routes=this.routes.filter(e=>e.path!==t),this}back(){this.mode==="history"&&window.history.back()}forward(){this.mode==="history"&&window.history.forward()}flush(){return this.routes=[],this}navigate(t={}){let e;if(typeof t=="string")e=t;else if(t.name){let i=t.params||{},a=this.routes.find(s=>s.name===t.name);if(a){e=a.path;for(let s in i)i.hasOwnProperty(s)&&(e=e.replace(":"+s,i[s]))}}else e=t.path;if(!e)return;if(this.mode==="history")window.history.pushState(null,null,this.root+r.clearSlashes(e));else{let i=`${window.location.href.replace(/#(.*)$/,"")}#${e}`;this.previous.unshift(i),window.location.href=i}return this}group(t,e){return this.prefixes.unshift(r.clearSlashes(t)),e.apply(this),this.prefixes.shift(),this}defineRoutes(t){for(let e of t)e.group?this.group(e.group,()=>{this.add(e.path,e.callback,e.name)}):this.add(e.path,e.callback,e.name)}getFragment(){let t;if(this.mode==="history")t=r.clearSlashes(decodeURI(window.location.pathname+window.location.search)),t=t.replace(/\?(.*)$/,""),t=this.root!=="/"?t.replace(this.root,""):t;else{let e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return r.clearSlashes(t)}listen(){clearInterval(this.interval),this.interval=setInterval(this.watchUrl,50)}watchUrl(){if(this.current===this.getFragment())return;this.current=this.getFragment();for(let t of this.routes){let e=t.match(this.current);if(e!==null){let i=[...Object.values(e.params),this.current,t];e.callback.apply(this,i);break}}}static clearSlashes(t){return t.toString().replace(/(^\/)|(\/$)/ig,"")}},f=r;window&&document&&(window.Router=r);})();
//# sourceMappingURL=router.min.js.map
